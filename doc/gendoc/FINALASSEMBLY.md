# finalassembly - æœ€ç»ˆè§†é¢‘åˆæˆå·¥å…·

## ğŸï¸ æ¦‚è¿°

`finalassembly` æ˜¯ txt-anime é¡¹ç›®çš„**æ­¥éª¤äº”ï¼šæœ€ç»ˆåˆæˆ (Final Assembly)**å·¥å…·ï¼Œè´Ÿè´£å°†å‰å››æ­¥ç”Ÿæˆçš„æ‰€æœ‰ç´ æï¼ˆå‰§æœ¬JSONã€åœºæ™¯å›¾ç‰‡ã€è§’è‰²è¯­éŸ³ï¼‰åˆæˆä¸ºä¸€ä¸ªå®Œæ•´çš„è§†é¢‘æ–‡ä»¶ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

1. **éŸ³é¢‘åˆå¹¶** - å°†æ¯ä¸ªåœºæ™¯çš„å¤šä¸ªå¯¹è¯éŸ³é¢‘æŒ‰é¡ºåºåˆå¹¶
2. **å­—å¹•ç”Ÿæˆ** - æ ¹æ®å‰§æœ¬è‡ªåŠ¨ç”Ÿæˆ SRT æ ¼å¼å­—å¹•
3. **åœºæ™¯è§†é¢‘ç”Ÿæˆ** - ä¸ºæ¯ä¸ªåœºæ™¯ç”Ÿæˆå¸¦å­—å¹•çš„è§†é¢‘ç‰‡æ®µ
4. **è§†é¢‘æ‹¼æ¥** - å°†æ‰€æœ‰åœºæ™¯æŒ‰é¡ºåºæ‹¼æ¥æˆå®Œæ•´è§†é¢‘

## ğŸ”§ ä¾èµ–è¦æ±‚

### FFmpeg

æœ¬å·¥å…·ä¾èµ– FFmpeg è¿›è¡Œè§†é¢‘å¤„ç†ï¼Œè¯·ç¡®ä¿å·²å®‰è£…ï¼š

```bash
# macOS
brew install ffmpeg

# Ubuntu/Debian
sudo apt-get install ffmpeg

# éªŒè¯å®‰è£…
ffmpeg -version
ffprobe -version
```

## ğŸ“¥ è¾“å…¥è¦æ±‚

### 1. å‰§æœ¬ JSON æ–‡ä»¶

ç”± `novel2comicli` ç”Ÿæˆçš„å‰§æœ¬æ–‡ä»¶ï¼ŒåŒ…å«åœºæ™¯å’Œè§’è‰²ä¿¡æ¯ï¼š

```json
{
  "script": [
    {
      "scene_id": 1,
      "location": "æ˜æš—çš„é…’é¦†",
      "characters_present": ["ä¸»è§’A", "è§’è‰²B"],
      "narration": "å¤œæ·±äº†ï¼Œé…’é¦†é‡Œåªå‰©ä¸‹å¯¥å¯¥å‡ äººã€‚",
      "dialogue": [
        {"character": "ä¸»è§’A", "line": "ä½ å¥½ã€‚"},
        {"character": "è§’è‰²B", "line": "ä½ æ¥äº†ã€‚"}
      ],
      "action_description": "ä¸»è§’ååœ¨å§å°å‰ï¼Œç¥æƒ…ç–²æƒ«ã€‚"
    }
  ],
  "characters": {
    "ä¸»è§’A": "20å²ç”·æ€§ï¼Œé»‘è‰²çŸ­å‘ï¼Œçš®å¤¹å…‹...",
    "è§’è‰²B": "è€äººï¼Œç™½èƒ¡å­ï¼Œå›´è£™..."
  }
}
```

### 2. åœºæ™¯å›¾ç‰‡ç›®å½•

ç”± `storyboard` ç”Ÿæˆçš„åœºæ™¯å›¾ç‰‡ï¼Œå‘½åæ ¼å¼ï¼š

```
images/
  scene_001.png
  scene_002.png
  scene_003.png
  ...
```

### 3. éŸ³é¢‘æ–‡ä»¶ç›®å½•

ç”± `audiosync` ç”Ÿæˆçš„å¯¹è¯éŸ³é¢‘ï¼Œå‘½åæ ¼å¼ï¼š

```
audio/
  scene_001_dialogue_001.mp3
  scene_001_dialogue_002.mp3
  scene_002_dialogue_001.mp3
  ...
```

## ğŸ“¤ è¾“å‡º

ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„ MP4 è§†é¢‘æ–‡ä»¶ï¼Œç‰¹ç‚¹ï¼š

- **è§†é¢‘ç¼–ç **: H.264 (yuv420p)
- **éŸ³é¢‘ç¼–ç **: AAC
- **å­—å¹•**: çƒ§å½•åˆ°è§†é¢‘ä¸­ï¼ˆä¸å¯å…³é—­ï¼‰
- **å¸§ç‡**: 24 FPSï¼ˆé»˜è®¤ï¼Œå¯è°ƒæ•´ï¼‰
- **æ—¶é•¿**: æ ¹æ®éŸ³é¢‘è‡ªåŠ¨è°ƒæ•´ï¼Œæ— éŸ³é¢‘æ—¶ä½¿ç”¨åŸºç¡€æ˜¾ç¤ºæ—¶é—´

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

```bash
./finalassembly \
  -input script.json \
  -images storyboard \
  -audio audio \
  -output final_anime.mp4
```

### å®Œæ•´å‚æ•°

```bash
./finalassembly \
  -input script.json \           # è¾“å…¥å‰§æœ¬JSONæ–‡ä»¶
  -images storyboard \            # åœºæ™¯å›¾ç‰‡ç›®å½•
  -audio audio \                  # éŸ³é¢‘æ–‡ä»¶ç›®å½•
  -output final.mp4 \             # è¾“å‡ºè§†é¢‘æ–‡ä»¶
  -image-time 3.0 \               # æ— éŸ³é¢‘åœºæ™¯çš„åŸºç¡€æ˜¾ç¤ºæ—¶é—´ï¼ˆç§’ï¼‰
  -fps 24                         # è§†é¢‘å¸§ç‡
```

### å‚æ•°è¯´æ˜

| å‚æ•° | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `-input` | âœ… | - | å‰§æœ¬ JSON æ–‡ä»¶è·¯å¾„ |
| `-images` | âœ… | - | åœºæ™¯å›¾ç‰‡ç›®å½•è·¯å¾„ |
| `-audio` | âœ… | - | éŸ³é¢‘æ–‡ä»¶ç›®å½•è·¯å¾„ |
| `-output` | âŒ | `final_anime.mp4` | è¾“å‡ºè§†é¢‘æ–‡ä»¶è·¯å¾„ |
| `-image-time` | âŒ | `3.0` | æ— éŸ³é¢‘åœºæ™¯çš„æ˜¾ç¤ºæ—¶é—´ï¼ˆç§’ï¼‰ |
| `-fps` | âŒ | `24` | è§†é¢‘å¸§ç‡ |

## ğŸ¬ å·¥ä½œæµç¨‹

### 1. åœºæ™¯å¤„ç†

å¯¹æ¯ä¸ªåœºæ™¯ï¼š

```
åœºæ™¯ N
  â”œâ”€ æŸ¥æ‰¾å›¾ç‰‡: scene_00N.png
  â”œâ”€ æŸ¥æ‰¾éŸ³é¢‘: scene_00N_dialogue_*.mp3
  â”œâ”€ åˆå¹¶éŸ³é¢‘: å°†å¤šä¸ªå¯¹è¯éŸ³é¢‘æŒ‰é¡ºåºåˆå¹¶
  â”œâ”€ è®¡ç®—æ—¶é•¿: æ ¹æ®éŸ³é¢‘æ€»æ—¶é•¿æˆ–ä½¿ç”¨åŸºç¡€æ—¶é•¿
  â”œâ”€ ç”Ÿæˆå­—å¹•: åˆ›å»º SRT å­—å¹•æ–‡ä»¶
  â””â”€ ç”Ÿæˆè§†é¢‘: å›¾ç‰‡ + éŸ³é¢‘ + å­—å¹• â†’ åœºæ™¯è§†é¢‘ç‰‡æ®µ
```

### 2. éŸ³é¢‘åˆå¹¶

- å¦‚æœåœºæ™¯æœ‰å¤šä¸ªå¯¹è¯ï¼ŒæŒ‰æ–‡ä»¶åé¡ºåºåˆå¹¶
- ä½¿ç”¨ `ffmpeg concat` åè®®æ— æŸæ‹¼æ¥
- è‡ªåŠ¨è®¡ç®—æ€»æ—¶é•¿

### 3. å­—å¹•ç”Ÿæˆ

ç”Ÿæˆ SRT æ ¼å¼å­—å¹•ï¼š

```srt
1
00:00:00,000 --> 00:00:02,500
å¤œæ·±äº†ï¼Œé…’é¦†é‡Œåªå‰©ä¸‹å¯¥å¯¥å‡ äººã€‚

2
00:00:02,500 --> 00:00:05,000
ä¸»è§’A: ä½ å¥½ã€‚

3
00:00:05,000 --> 00:00:07,500
è§’è‰²B: ä½ æ¥äº†ã€‚
```

å­—å¹•æ—¶é—´åˆ†é…é€»è¾‘ï¼š
- **æ—ç™½**: æ ¹æ®æ–‡å­—é•¿åº¦ä¼°ç®—ï¼ˆçº¦10å­—/ç§’ï¼‰
- **å¯¹è¯**: å¹³å‡åˆ†é…å‰©ä½™æ—¶é—´

### 4. åœºæ™¯è§†é¢‘ç”Ÿæˆ

ä½¿ç”¨ FFmpeg å°†å›¾ç‰‡ã€éŸ³é¢‘ã€å­—å¹•åˆæˆï¼š

```bash
ffmpeg \
  -loop 1 -i scene.png \          # å¾ªç¯æ˜¾ç¤ºå›¾ç‰‡
  -i audio.mp3 \                   # éŸ³é¢‘
  -vf "subtitles=subtitle.srt" \   # çƒ§å½•å­—å¹•
  -t <duration> \                  # è§†é¢‘æ—¶é•¿
  -r 24 \                          # å¸§ç‡
  -pix_fmt yuv420p \               # åƒç´ æ ¼å¼
  -c:a aac \                       # éŸ³é¢‘ç¼–ç 
  output.mp4
```

å­—å¹•æ ·å¼ï¼š
- å­—ä½“: Arial
- å­—å·: 24
- é¢œè‰²: ç™½è‰²
- æè¾¹: é»‘è‰²
- æ ·å¼: åº•éƒ¨å±…ä¸­

### 5. è§†é¢‘æ‹¼æ¥

å°†æ‰€æœ‰åœºæ™¯è§†é¢‘æŒ‰ `scene_id` é¡ºåºæ‹¼æ¥ï¼š

```bash
# åˆ›å»ºæ–‡ä»¶åˆ—è¡¨
file 'segment_001.mp4'
file 'segment_002.mp4'
file 'segment_003.mp4'

# ä½¿ç”¨ concat æ‹¼æ¥
ffmpeg -f concat -safe 0 -i list.txt -c copy final.mp4
```

## ğŸ“Š ç¤ºä¾‹è¾“å‡º

### æ§åˆ¶å°è¾“å‡º

```
ğŸ“– è¯»å–å‰§æœ¬æ–‡ä»¶: demo-script.json
âœ… åŠ è½½äº† 5 ä¸ªåœºæ™¯

ğŸ¬ å¤„ç†åœºæ™¯ 1/5 (Scene 1)
  ğŸ–¼ï¸  å›¾ç‰‡: scene_001.png
  ğŸµ æ‰¾åˆ° 2 ä¸ªéŸ³é¢‘æ–‡ä»¶
  â±ï¸  éŸ³é¢‘æ€»æ—¶é•¿: 8.50 ç§’
  âœ… ç”Ÿæˆè§†é¢‘ç‰‡æ®µ: segment_001.mp4

ğŸ¬ å¤„ç†åœºæ™¯ 2/5 (Scene 2)
  ğŸ–¼ï¸  å›¾ç‰‡: scene_002.png
  ğŸµ æ‰¾åˆ° 1 ä¸ªéŸ³é¢‘æ–‡ä»¶
  â±ï¸  éŸ³é¢‘æ€»æ—¶é•¿: 5.20 ç§’
  âœ… ç”Ÿæˆè§†é¢‘ç‰‡æ®µ: segment_002.mp4

...

ğŸï¸  åˆå¹¶æ‰€æœ‰åœºæ™¯è§†é¢‘...

âœ… è§†é¢‘ç”Ÿæˆå®Œæˆ: demo-final.mp4
ğŸ“¦ æ–‡ä»¶å¤§å°: 12.34 MB
```

### ç”Ÿæˆçš„æ–‡ä»¶

```
demo-final.mp4           # æœ€ç»ˆè§†é¢‘ï¼ˆä¿ç•™ï¼‰
temp_video_segments/     # ä¸´æ—¶ç›®å½•ï¼ˆè‡ªåŠ¨æ¸…ç†ï¼‰
  segment_001.mp4
  segment_002.mp4
  ...
```

## âš™ï¸ é«˜çº§é…ç½®

### è°ƒæ•´è§†é¢‘è´¨é‡

ä¿®æ”¹ `generateVideoWithFFmpeg` å‡½æ•°ä¸­çš„ FFmpeg å‚æ•°ï¼š

```go
// é«˜è´¨é‡
"-crf", "18",
"-preset", "slow",

// æ ‡å‡†è´¨é‡ï¼ˆé»˜è®¤ï¼‰
// ä½¿ç”¨ -c copy

// å¿«é€Ÿç¼–ç 
"-preset", "ultrafast",
```

### è°ƒæ•´å­—å¹•æ ·å¼

ä¿®æ”¹ `generateVideoWithFFmpeg` ä¸­çš„ `subtitles` æ»¤é•œå‚æ•°ï¼š

```go
-vf "subtitles=file.srt:force_style='FontName=Microsoft YaHei,FontSize=28,PrimaryColour=&HFFFFFF&,OutlineColour=&H000000&,Outline=2,Shadow=1'"
```

æ ·å¼å‚æ•°ï¼š
- `FontName`: å­—ä½“åç§°ï¼ˆå¦‚ "Arial", "Microsoft YaHei"ï¼‰
- `FontSize`: å­—ä½“å¤§å°
- `PrimaryColour`: ä¸»é¢œè‰²ï¼ˆ&HAABBGGRR& æ ¼å¼ï¼‰
- `OutlineColour`: æè¾¹é¢œè‰²
- `Outline`: æè¾¹å®½åº¦
- `Shadow`: é˜´å½±æ·±åº¦

### è°ƒæ•´æ—¶é—´åˆ†é…

ä¿®æ”¹ `generateSubtitle` å‡½æ•°ä¸­çš„æ—¶é—´åˆ†é…é€»è¾‘ï¼š

```go
// æ—ç™½æ—¶é•¿ï¼ˆå½“å‰ï¼š10å­—/ç§’ï¼‰
duration := time.Duration(float64(len(scene.Narration)) / 10.0 * float64(time.Second))

// å¯æ”¹ä¸ºï¼š15å­—/ç§’ï¼ˆæ›´å¿«ï¼‰
duration := time.Duration(float64(len(scene.Narration)) / 15.0 * float64(time.Second))

// æˆ–ï¼š8å­—/ç§’ï¼ˆæ›´æ…¢ï¼‰
duration := time.Duration(float64(len(scene.Narration)) / 8.0 * float64(time.Second))
```

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1: æœªæ‰¾åˆ° ffmpeg

**é”™è¯¯ä¿¡æ¯**:
```
âŒ æœªæ‰¾åˆ° ffmpegï¼Œè¯·ç¡®ä¿å·²å®‰è£… ffmpeg å¹¶æ·»åŠ åˆ° PATH
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å®‰è£… ffmpeg
brew install ffmpeg  # macOS
sudo apt-get install ffmpeg  # Ubuntu

# éªŒè¯
which ffmpeg
ffmpeg -version
```

### é—®é¢˜2: åœºæ™¯å›¾ç‰‡ä¸å­˜åœ¨

**é”™è¯¯ä¿¡æ¯**:
```
âŒ ç”Ÿæˆåœºæ™¯ 1 è§†é¢‘å¤±è´¥: åœºæ™¯å›¾ç‰‡ä¸å­˜åœ¨: storyboard/scene_001.png
```

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿å…ˆè¿è¡Œ `storyboard` ç”Ÿæˆå›¾ç‰‡
- æ£€æŸ¥ `-images` å‚æ•°è·¯å¾„æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥å›¾ç‰‡æ–‡ä»¶å‘½åæ ¼å¼

### é—®é¢˜3: éŸ³é¢‘æ–‡ä»¶æ‰¾ä¸åˆ°

**ç°è±¡**: åœºæ™¯æ˜¾ç¤º "æ— éŸ³é¢‘ï¼Œä½¿ç”¨åŸºç¡€æ—¶é•¿"

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿å…ˆè¿è¡Œ `audiosync` ç”ŸæˆéŸ³é¢‘
- æ£€æŸ¥ `-audio` å‚æ•°è·¯å¾„æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶å‘½åæ ¼å¼ï¼š`scene_XXX_dialogue_YYY.mp3`
- æ³¨æ„ï¼šæ²¡æœ‰å¯¹è¯çš„åœºæ™¯æ˜¯æ­£å¸¸çš„ï¼Œä¼šä½¿ç”¨ `-image-time` æŒ‡å®šçš„æ—¶é•¿

### é—®é¢˜4: å­—å¹•ä¹±ç 

**ç°è±¡**: è§†é¢‘ä¸­çš„ä¸­æ–‡å­—å¹•æ˜¾ç¤ºä¸ºæ–¹å—æˆ–ä¹±ç 

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ–¹æ¡ˆ1: ä½¿ç”¨ç³»ç»Ÿä¸­æ–‡å­—ä½“
-vf "subtitles=file.srt:force_style='FontName=Microsoft YaHei'"

# æ–¹æ¡ˆ2: æŒ‡å®šå­—ä½“æ–‡ä»¶
-vf "subtitles=file.srt:fontsdir=/System/Library/Fonts"

# æ–¹æ¡ˆ3: ä½¿ç”¨ Arial Unicode MS
-vf "subtitles=file.srt:force_style='FontName=Arial Unicode MS'"
```

### é—®é¢˜5: è§†é¢‘æ— æ³•æ’­æ”¾

**ç°è±¡**: ç”Ÿæˆçš„è§†é¢‘æ–‡ä»¶æŸäº›æ’­æ”¾å™¨æ— æ³•æ’­æ”¾

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç¡®ä¿ä½¿ç”¨å…¼å®¹çš„ç¼–ç æ ¼å¼
# åœ¨ä»£ç ä¸­å·²ä½¿ç”¨ -pix_fmt yuv420pï¼ˆå…¼å®¹æ€§æœ€å¥½ï¼‰

# å¦‚æœè¿˜æ˜¯æœ‰é—®é¢˜ï¼Œå°è¯•é‡æ–°ç¼–ç 
ffmpeg -i final.mp4 -c:v libx264 -c:a aac -strict experimental final_fixed.mp4
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å¹¶è¡Œå¤„ç†ï¼ˆæœªå®ç°ï¼‰

å½“å‰æ˜¯ä¸²è¡Œå¤„ç†åœºæ™¯ï¼Œå¯ä»¥ä¼˜åŒ–ä¸ºå¹¶è¡Œï¼š

```go
// ä½¿ç”¨ goroutine å¹¶è¡Œç”Ÿæˆåœºæ™¯è§†é¢‘
var wg sync.WaitGroup
semaphore := make(chan struct{}, 4)  // é™åˆ¶å¹¶å‘æ•°

for i, scene := range scriptData.Script {
    wg.Add(1)
    go func(i int, scene Scene) {
        defer wg.Done()
        semaphore <- struct{}{}
        defer func() { <-semaphore }()
        
        // ç”Ÿæˆåœºæ™¯è§†é¢‘...
    }(i, scene)
}
wg.Wait()
```

### å‡å°è¾“å‡ºæ–‡ä»¶å¤§å°

```bash
# ä½¿ç”¨æ›´é«˜çš„å‹ç¼©ç‡ï¼ˆç‰ºç‰²ä¸€äº›è´¨é‡ï¼‰
-crf 28           # é»˜è®¤23ï¼Œå€¼è¶Šå¤§æ–‡ä»¶è¶Šå°

# é™ä½åˆ†è¾¨ç‡
-vf "scale=1280:720"  # ä»åŸå§‹å°ºå¯¸é™è‡³720p

# é™ä½å¸§ç‡
-fps 15           # ä»24é™è‡³15

# é™ä½éŸ³é¢‘æ¯”ç‰¹ç‡
-b:a 96k          # ä»é»˜è®¤128ké™è‡³96k
```

## ğŸ¯ æœ€ä½³å®è·µ

1. **ç¡®ä¿è¾“å…¥å®Œæ•´**
   - è¿è¡Œå‰ç¡®è®¤æ‰€æœ‰åœºæ™¯éƒ½æœ‰å¯¹åº”çš„å›¾ç‰‡
   - æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶æ˜¯å¦å®Œæ•´ï¼ˆå¯ä»¥æ¥å—æ²¡æœ‰éŸ³é¢‘çš„åœºæ™¯ï¼‰

2. **é€‰æ‹©åˆé€‚çš„å‚æ•°**
   - çŸ­å°è¯´ï¼šä½¿ç”¨é»˜è®¤å‚æ•°
   - é•¿å°è¯´ï¼šè€ƒè™‘é™ä½ FPS æˆ–è°ƒæ•´ `-image-time` å‡å°æ–‡ä»¶å¤§å°

3. **æµ‹è¯•æµç¨‹**
   - å…ˆç”¨å°‘é‡åœºæ™¯æµ‹è¯•ï¼ˆä¿®æ”¹å‰§æœ¬JSONï¼Œåªä¿ç•™å‰å‡ ä¸ªåœºæ™¯ï¼‰
   - ç¡®è®¤æ•ˆæœåå†å¤„ç†å®Œæ•´å†…å®¹

4. **å­—å¹•ä¼˜åŒ–**
   - å¦‚éœ€æ›´ç²¾ç»†çš„å­—å¹•æ—¶é—´æ§åˆ¶ï¼Œå¯æ‰‹åŠ¨ç¼–è¾‘ç”Ÿæˆçš„ SRT æ–‡ä»¶
   - è€ƒè™‘æ ¹æ®éŸ³é¢‘å®é™…é•¿åº¦è°ƒæ•´å­—å¹•æ˜¾ç¤ºæ—¶é—´

5. **ä¿å­˜ä¸­é—´æ–‡ä»¶**
   - å¦‚éœ€åå¤è°ƒè¯•ï¼Œå¯æ³¨é‡Šæ‰ `defer os.RemoveAll(tempDir)`
   - ä¿ç•™åœºæ™¯è§†é¢‘ç‰‡æ®µä¾¿äºå•ç‹¬æ£€æŸ¥

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [USAGE.md](USAGE.md) - æ­¥éª¤ä¸€+äºŒï¼šå‰§æœ¬ç”Ÿæˆ
- [STORYBOARD.md](STORYBOARD.md) - æ­¥éª¤ä¸‰ï¼šåˆ†é•œç”Ÿæˆ
- [AUDIO.md](AUDIO.md) - æ­¥éª¤å››ï¼šè¯­éŸ³åˆæˆ
- [QUICKSTART.md](QUICKSTART.md) - å®Œæ•´æµç¨‹å¿«é€Ÿå¼€å§‹
- [demo.sh](demo.sh) - è‡ªåŠ¨åŒ–æ¼”ç¤ºè„šæœ¬

## ğŸ“ æŠ€æœ¯ç»†èŠ‚

### SRT å­—å¹•æ ¼å¼

```srt
åºå·
å¼€å§‹æ—¶é—´ --> ç»“æŸæ—¶é—´
å­—å¹•æ–‡æœ¬

åºå·
å¼€å§‹æ—¶é—´ --> ç»“æŸæ—¶é—´
å­—å¹•æ–‡æœ¬
```

æ—¶é—´æ ¼å¼ï¼š`HH:MM:SS,mmm`ï¼ˆæ—¶:åˆ†:ç§’,æ¯«ç§’ï¼‰

### FFmpeg Concat åè®®

```
file '/absolute/path/to/file1.mp4'
file '/absolute/path/to/file2.mp4'
file '/absolute/path/to/file3.mp4'
```

- å¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„æˆ–æ­£ç¡®çš„ç›¸å¯¹è·¯å¾„
- ä½¿ç”¨ `-safe 0` å…è®¸æ‰€æœ‰è·¯å¾„
- ä½¿ç”¨ `-c copy` é¿å…é‡æ–°ç¼–ç ï¼ˆé€Ÿåº¦å¿«ï¼‰

### è§†é¢‘æ—¶é•¿è®¡ç®—

```
åœºæ™¯è§†é¢‘æ—¶é•¿ = MAX(éŸ³é¢‘æ€»æ—¶é•¿, åŸºç¡€æ˜¾ç¤ºæ—¶é—´)
```

- æœ‰éŸ³é¢‘ï¼šä½¿ç”¨éŸ³é¢‘æ—¶é•¿
- æ— éŸ³é¢‘ï¼šä½¿ç”¨ `-image-time` æŒ‡å®šçš„æ—¶é•¿
- æœ€ç»ˆè§†é¢‘æ—¶é•¿ = æ‰€æœ‰åœºæ™¯æ—¶é•¿ä¹‹å’Œ

## ğŸš€ ä¸‹ä¸€æ­¥

å®Œæˆè§†é¢‘åˆæˆåï¼Œä½ å¯ä»¥ï¼š

1. **æ’­æ”¾è§†é¢‘**: `open final_anime.mp4`
2. **åˆ†äº«ä½œå“**: ä¸Šä¼ åˆ°è§†é¢‘å¹³å°
3. **ä¼˜åŒ–å‚æ•°**: è°ƒæ•´å­—å¹•æ ·å¼ã€è§†é¢‘è´¨é‡ç­‰
4. **æ‰¹é‡å¤„ç†**: å¤„ç†å¤šä¸ªå°è¯´ç”Ÿæˆå¤šä¸ªåŠ¨æ¼«

---

æŸ¥çœ‹ [QUICKSTART.md](QUICKSTART.md) äº†è§£å®Œæ•´çš„äº”æ­¥æµç¨‹ï¼

